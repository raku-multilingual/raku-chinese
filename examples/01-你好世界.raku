#!/usr/bin/env raku
use lib 'lib';
use Chinese;

說 "你好，世界！\n";

# 獲取用戶輸入 / Get user input
印 "你叫什麼名字？";
my $名字 = 獲取() // '';
說 "你好，$名字！歡迎使用中文 Raku。\n";

# 基本數學 / Basic math
說 "=== 基本數學運算 ===";
my @數字 = 1..10;
說 "數字：", @數字;
說 "總和：", 總和(@數字);
說 "平均：", 平均(@數字);
說 "最小：", 最小(@數字);
說 "最大：", 最大(@數字);

# 使用中文操作符 / Using Chinese operators
說 "\n=== 中文操作符 ===";
my $a = 10;
my $b = 3;
說 "$a 加 $b = ", ($a 加 $b);
說 "$a 減 $b = ", ($a 減 $b);
說 "$a 乘 $b = ", ($a 乘 $b);
說 "$a 除 $b = ", 四捨五入($a 除 $b);
說 "$a 餘 $b = ", ($a 餘 $b);
說 "$a 冪 $b = ", ($a 冪 $b);

# 字符串操作 / String operations
說 "\n=== 字符串操作 ===";
my $原文 = "  你好 世界  ";
說 "原始：'$原文'";
說 "修剪：'", 修剪($原文), "'";
說 "大寫：", 大寫($原文);
說 "小寫：", 小寫("HELLO WORLD");
說 "長度：", 長度(修剪($原文));

# 列表操作 / List operations
說 "\n=== 列表操作 ===";
my @水果 = <蘋果 香蕉 橙子 葡萄 蘋果>;
說 "水果：", @水果;
說 "第一個：", 第一個(@水果);
說 "最後一個：", 最後一個(@水果);
說 "唯一值：", 唯一(@水果);
說 "排序：", 排序(@水果);

# 邏輯判斷 / Logic
說 "\n=== 邏輯判斷 ===";
印 "你幾歲？";
my $年齡 = 轉整數(獲取() // 0);
if ($年齡 大於等於 18) {
    說 "你是成年人";
} else {
    說 "你是未成年人";
}

# 類型檢查 / Type checking
說 "\n=== 類型檢查 ===";
說 "42 是數字嗎？", 是數字(42);
說 "'你好' 是字符串嗎？", 是字符串('你好');
說 "42 是偶數嗎？", 是偶數(42);
說 "7 是質數嗎？", 是質數(7);

# 日期和時間 / Date and time
說 "\n=== 日期和時間 ===";
說 "今天：", 今天();
說 "現在：", 時間().hh-mm-ss;

# 隨機數 / Random numbers
說 "\n=== 隨機數 ===";
說 "隨機數 (0-1)：", 隨機();
說 "隨機整數 (1-100)：", 隨機整數(1, 100);
my @顏色 = <紅 黃 藍 綠>;
說 "隨機顏色：", 隨機選擇(@顏色);

# 函數式操作 / Functional operations
說 "\n=== 函數式編程 ===";
my @平方 = 映射(-> $n { $n 乘 $n }, 1..5);
說 "1-5 的平方：", @平方;

my @偶數 = 過濾(-> $n { 是偶數($n) }, 1..10);
說 "1-10 的偶數：", @偶數;

my $階乘5 = 歸約(-> $a, $b { $a 乘 $b }, 1..5);
說 "5 的階乘：", $階乘5;

說 "\n再見，$名字！";